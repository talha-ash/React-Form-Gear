(function(n,l){typeof exports=="object"&&typeof module<"u"?module.exports=l(require("react")):typeof define=="function"&&define.amd?define(["react"],l):(n=typeof globalThis<"u"?globalThis:n||self,n["react-form-gear"]=l(n.React))})(this,function(n){"use strict";const l=(e,t)=>{switch(t.type){case"FieldChange":return{...e,fields:t.fields};case"FormSubmit":const{fields:r,isValid:i}=t;return{...e,fields:r,isValid:i,isSubmitting:!1};case"IsSubmitting":return{...e,showError:!0,isSubmitting:t.isSubmitting?t.isSubmitting:!e.isSubmitting};default:throw new Error("Unexpected action")}};function o(e){return!!e}function c(e){return/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)}function g(e,t){return e.length>=t.min}function h(e){return/^[A-Za-z ]+$/.test(e)}function p(e){return!!/^[a-zA-Z0-9_][a-zA-Z]+[0-9]+$/.test(e)}function b(e){return!!new RegExp("^[0-9]+$").test(e)}function F(e){try{return new URL(e),!0}catch{return!1}}const m=(e,t)=>{if("validateFunction"in t)return t.validateFunction[t.type](e,t);const r={required:o,email:c,minLength:g,url:F,numbers:b,letters:h,username:p};if(r[t.type])return r[t.type](e,t==null?void 0:t.data)},w=e=>{let t={},r=!0;return e.constraints.map(i=>{m(e.value,i)&&r?t={...e,isValid:!0,errorMessage:""}:r&&(r=!1,t={...e,isValid:!1,errorMessage:i.message})}),e.constraints.length<=0&&(t={...e}),t},S=e=>{let t={},r=[];return Object.keys(e).map(i=>{let s=!0;e[i].constraints.map(a=>{m(e[i].value,a)&&s?(r.push(!0),t[i]={...e[i],isValid:!0,errorMessage:""}):s&&(r.push(!1),t[i]={...e[i],isValid:!1,errorMessage:a.message},s=!1)}),e[i].constraints.length<=0&&(t[i]={...e[i]})}),{isValid:!r.includes(!1),fields:t}};return({formFields:e,afterSubmit:t,immediateError:r=!1})=>{const[i,s]=n.useReducer(l,{fields:{...e},isValid:!0,isSubmitting:!1,showError:r});return{handleChange:d=>{const{name:u,value:f}=d.target;if(i.fields[u].value=f,i.showError){let V=w(i.fields[u]);s({type:"FieldChange",fields:{...i.fields,[u]:V}})}else s({type:"FieldChange",fields:{...i.fields,[u]:i.fields[u]}})},handleSubmit:d=>{d.preventDefault(),s({type:"IsSubmitting",isSubmitting:!0});const{isValid:u,fields:f}=S(i.fields);s({type:"FormSubmit",fields:f,isValid:u}),t(u)},fields:i.fields,isValidForm:i.isValid,isSubmitting:i.isSubmitting}}});
